<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"lottyzhou.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"right","display":"always","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="1. 资源文件引用的方式在第一节，先来介绍一下 CocoaPods 两种资源文件引用的方式——resource_bundles &amp; resources 1.1 resource_bundlesresource_bundles 允许定义当前 Pod 库的资源包的名称和文件。用 hash 的形式来声明，key 是 bundle 的名称，value 是需要包括的文件的通配 patterns。">
<meta property="og:type" content="article">
<meta property="og:title" content="关于 Pod 库的资源引用 resource_bundles or resources">
<meta property="og:url" content="http://lottyzhou.com/2018/02/02/pod-resource-reference/index.html">
<meta property="og:site_name">
<meta property="og:description" content="1. 资源文件引用的方式在第一节，先来介绍一下 CocoaPods 两种资源文件引用的方式——resource_bundles &amp; resources 1.1 resource_bundlesresource_bundles 允许定义当前 Pod 库的资源包的名称和文件。用 hash 的形式来声明，key 是 bundle 的名称，value 是需要包括的文件的通配 patterns。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-01.pnghttps://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-01.png">
<meta property="og:image" content="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-02.png">
<meta property="og:image" content="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-04.png">
<meta property="og:image" content="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-03.png">
<meta property="og:image" content="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-06.png">
<meta property="og:image" content="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-07.png">
<meta property="og:image" content="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-08.png">
<meta property="og:image" content="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-09.png">
<meta property="og:image" content="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-10.png">
<meta property="og:image" content="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-11.png">
<meta property="og:image" content="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-12.png">
<meta property="og:image" content="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-13.png">
<meta property="og:image" content="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-14.png">
<meta property="og:image" content="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-15.png">
<meta property="og:image" content="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-16.png">
<meta property="og:image" content="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-17.png">
<meta property="article:published_time" content="2018-02-02T10:29:09.000Z">
<meta property="article:modified_time" content="2021-10-11T09:40:59.401Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-01.pnghttps://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-01.png">

<link rel="canonical" href="http://lottyzhou.com/2018/02/02/pod-resource-reference/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>关于 Pod 库的资源引用 resource_bundles or resources | </title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title"></h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://lottyzhou.com/2018/02/02/pod-resource-reference/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/uploads/avatar.jpg">
      <meta itemprop="name" content="Author">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          关于 Pod 库的资源引用 resource_bundles or resources
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-02-02 18:29:09" itemprop="dateCreated datePublished" datetime="2018-02-02T18:29:09+08:00">2018-02-02</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-10-11 17:40:59" itemprop="dateModified" datetime="2021-10-11T17:40:59+08:00">2021-10-11</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="1-资源文件引用的方式"><a href="#1-资源文件引用的方式" class="headerlink" title="1. 资源文件引用的方式"></a>1. 资源文件引用的方式</h1><p>在第一节，先来介绍一下 CocoaPods 两种资源文件引用的方式——<code>resource_bundles</code> &amp; <code>resources</code></p>
<h2 id="1-1-resource-bundles"><a href="#1-1-resource-bundles" class="headerlink" title="1.1 resource_bundles"></a>1.1 resource_bundles</h2><p><code>resource_bundles</code> 允许定义当前 Pod 库的资源包的<strong>名称和文件</strong>。用 hash 的形式来声明，key 是 bundle 的名称，value 是需要包括的文件的通配 patterns。</p>
<blockquote>
<p>We strongly recommend library developers to adopt resource bundles as there can be name collisions using the resources attribute.</p>
</blockquote>
<p>CocoaPods 官方强烈推荐使用 <code>resource_bundles</code>，因为用 key-value 可以避免相同名称资源的名称冲突。</p>
<p>同时建议 bundle 的名称至少应该包括 Pod 库的名称，可以尽量减少同名冲突</p>
<p>Examples:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spec.ios.resource_bundle = &#123; <span class="string">&#x27;MapBox&#x27;</span> =&gt; <span class="string">&#x27;MapView/Map/Resources/*.png&#x27;</span> &#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">spec.resource_bundles = &#123;</span><br><span class="line">    <span class="string">&#x27;MapBox&#x27;</span> =&gt; [<span class="string">&#x27;MapView/Map/Resources/*.png&#x27;</span>],</span><br><span class="line">    <span class="string">&#x27;OtherResources&#x27;</span> =&gt; [<span class="string">&#x27;MapView/Map/OtherResources/*.png&#x27;</span>]</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<span id="more"></span>
<h2 id="1-2-resources"><a href="#1-2-resources" class="headerlink" title="1.2 resources"></a>1.2 resources</h2><p>使用 <code>resources</code> 来指定资源，被指定的资源只会简单的被 copy 到目标工程中（主工程）。</p>
<blockquote>
<p>We strongly recommend library developers to adopt resource bundles as there can be name collisions using the resources attribute. Moreover, resources specified with this attribute are copied directly to the client target and therefore they are not optimised by Xcode.</p>
</blockquote>
<p>官方认为用 <code>resources</code> 是无法避免同名资源文件的冲突的，同时，Xcode 也不会对这些资源做优化。</p>
<p>Examples:</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spec.resource = <span class="string">&#x27;Resources/HockeySDK.bundle&#x27;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">spec.resources = [<span class="string">&#x27;Images/*.png&#x27;</span>, <span class="string">&#x27;Sounds/*&#x27;</span>]</span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>FYI：</strong><br><a target="_blank" rel="noopener" href="https://guides.cocoapods.org/syntax/podspec.html">Podspec Syntax Reference v1.4.0</a></p>
</blockquote>
<h1 id="2-图片资源的管理"><a href="#2-图片资源的管理" class="headerlink" title="2. 图片资源的管理"></a>2. 图片资源的管理</h1><p>我们熟知平常用的 @2x @3x 图片是为了缩小用户最终下载时包的大小，通常我们会将图片放在 <code>.xcassets</code> 文件中管理，新建的项目也默认创建：</p>
<p><img src="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-01.pnghttps://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-01.png" alt=""></p>
<p>使用 <code>.xcassets</code> 不仅可以方便在 Xcode 查看和拖入图片，同时 <code>.xcassets</code> 最终会打包生成为<br> <code>Assets.car</code> 文件。对于 <code>Assets.car</code> 文件，<a target="_blank" rel="noopener" href="https://help.apple.com/xcode/mac/current/#/devbbdc5ce4f">App Slicing</a> 会为切割留下符合目标设备分辨率的图片，可以缩小用户最终下载的包的大小。</p>
<blockquote>
<p><strong>FYI：</strong><br><a target="_blank" rel="noopener" href="https://developer.apple.com/library/content/documentation/Xcode/Reference/xcode_ref-Asset_Catalog_Format/FolderStructure.html#//apple_ref/doc/uid/TP40015170-CH33-SW1">Xcode Ref Asset Catalog Format</a><br><a target="_blank" rel="noopener" href="https://help.apple.com/xcode/mac/current/#/devbbdc5ce4f">App thinning overview (iOS, tvOS, watchOS)</a></p>
</blockquote>
<p>实际上，对于 Pods 库的资源，同样可以使用 <code>.xcassets</code> 管理。</p>
<h1 id="3-实际验证"><a href="#3-实际验证" class="headerlink" title="3. 实际验证"></a>3. 实际验证</h1><blockquote>
<p>不关注的可以直接跳到下面『结论』</p>
</blockquote>
<p>官文中推荐了 <code>resource_bundles</code> 其理由主要是『可以解决同名冲突』和『Xcode为 bundle 提供的一些优化』。</p>
<p>我知道很多人看过 <a target="_blank" rel="noopener" href="http://blog.xianqu.org/2015/08/pod-resources/">这篇</a> 文章，里面提到 resource_bundles 不能使用 .xcassets。</p>
<p>那么到底是不是这样，我们需要亲自动手验证，看看两种引用方式，CocoaPods 到底为我们做了什么。</p>
<p>我们将在『实际验证』一节验证：</p>
<ol>
<li><code>resource_bundles</code> 是否能使用 *.xcassets 指定资源并正确打包</li>
<li>同名冲突是怎样的</li>
</ol>
<h2 id="3-1-resource-bundles-是否能使用-xcassets-指定资源并正确打包"><a href="#3-1-resource-bundles-是否能使用-xcassets-指定资源并正确打包" class="headerlink" title="3.1 resource_bundles 是否能使用 *.xcassets 指定资源并正确打包"></a>3.1 resource_bundles 是否能使用 *.xcassets 指定资源并正确打包</h2><p>写两个 Demo Pod，同时创建好对应的 Example 测试工程。</p>
<p><img src="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-02.png" alt=""></p>
<p>对两个 Pod 分别使用不同的方式指定资源。</p>
<p>第一个 Demo Pod：</p>
<p><img src="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-04.png" alt=""></p>
<p>第二个 Demo Pod：</p>
<p><img src="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-03.png" alt=""></p>
<p>分别用了 <code>resource_bundles</code> 和 <code>resources</code> 两种方式引用。</p>
<p><code>pod install</code> 后，观察结果。</p>
<h3 id="3-1-1-使用-resources"><a href="#3-1-1-使用-resources" class="headerlink" title="3.1.1 使用 resources"></a>3.1.1 使用 resources</h3><p><code>pod install</code> 并编译 Example 工程后，我们可以打开最后生成的 Product 文件下的内容：</p>
<p><img src="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-06.png" alt=""></p>
<p>可以看到只有 一些 <code>.a</code> 文件，<code>.a</code> 文件是二进制文件。初次之外只有 <code>SubModule-Example.app</code>，打开包内容，可以看到只有一个 <code>Assets.car</code>。</p>
<p>这说明，使用 <code>resources</code> 之后只会简单的将资源文件 copy 到目标工程（Example 工程），最后和目标工程的图片文件以及其他同样使用 <code>resources</code> 的 Pod 的图片文件，统一一起打包为了一个 <code>Assets.car</code>。</p>
<p><img src="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-07.png" alt=""></p>
<p>再为 Pod 写一个 VC 来实验读取图片：</p>
<p><img src="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-08.png" alt=""></p>
<p>读取图片的方式和平常使用的方式不同，要先获取 Bundle：</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">UIImage</span> *image = [<span class="built_in">UIImage</span> imageNamed:<span class="string">@&quot;some-image&quot;</span></span><br><span class="line">                                inBundle:[<span class="built_in">NSBundle</span> bundleForClass:[<span class="keyword">self</span> <span class="keyword">class</span>]]</span><br><span class="line">           compatibleWithTraitCollection:<span class="literal">nil</span>];</span><br></pre></td></tr></table></figure>
<p>在 Example 的 <code>ViewController</code> 写一下跳转 <code>SubModule/SMViewController</code>：</p>
<p><img src="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-09.png" alt=""></p>
<p>运行之后，看一下，能正常访问图片：</p>
<p><img src="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-10.png" alt=""></p>
<h3 id="3-1-2-使用-resource-bundles"><a href="#3-1-2-使用-resource-bundles" class="headerlink" title="3.1.2 使用 resource_bundles"></a>3.1.2 使用 <code>resource_bundles</code></h3><p><code>pod install</code> 并编译 Example 工程后，同样找到 Product 文件下的内容：</p>
<p><img src="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-11.png" alt=""></p>
<p>可以看到最终生成了一个 <code>SubModule_Use_Bundle.bundle</code>，打开看内部：</p>
<p><img src="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-12.png" alt=""></p>
<p>发现包含了一个 <code>Assets.car</code></p>
<p>再为 Pod 写一个 VC 来实验读取图片：</p>
<p><img src="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-13.png" alt=""></p>
<p>由于还需要带上 .bundle 文件的路径，获取的方式又不同：</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSString</span> *bundlePath = [[<span class="built_in">NSBundle</span> bundleForClass:[<span class="keyword">self</span> <span class="keyword">class</span>]].resourcePath</span><br><span class="line">                            stringByAppendingPathComponent:<span class="string">@&quot;/SubModule_Use_Bundle.bundle&quot;</span>];</span><br><span class="line"><span class="built_in">NSBundle</span> *resource_bundle = [<span class="built_in">NSBundle</span> bundleWithPath:bundlePath];</span><br><span class="line"><span class="built_in">UIImage</span> *image = [<span class="built_in">UIImage</span> imageNamed:<span class="string">@&quot;some-image&quot;</span></span><br><span class="line">                                inBundle:resource_bundle</span><br><span class="line">           compatibleWithTraitCollection:<span class="literal">nil</span>];</span><br></pre></td></tr></table></figure>
<p>在 Example 的 <code>ViewController</code> 写一下跳转 <code>SubModule/SMViewController</code>：</p>
<p><img src="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-14.png" alt=""></p>
<p>运行之后，看一下，也能正常访问图片：</p>
<p><img src="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-15.png" alt=""></p>
<h3 id="3-1-3-resources-和-resource-bundles-对于-xcassets-的支持"><a href="#3-1-3-resources-和-resource-bundles-对于-xcassets-的支持" class="headerlink" title="3.1.3 resources 和 resource_bundles 对于 .xcassets 的支持"></a>3.1.3 resources 和 resource_bundles 对于 .xcassets 的支持</h3><p>从 3.1 和 3.2 可以看出 resources 和 resource_bundles 都可以很好的支持 .xcassets 的引用。</p>
<p>所以，<a target="_blank" rel="noopener" href="http://blog.xianqu.org/2015/08/pod-resources/">这篇</a> 文章，里面提到 resource_bundles 不能使用 .xcassets 并不存在。应该说这篇文章已经比较老了，<strong>CocoaPods 随着不断的更新，<code>resource_bundles</code> 已经可以很好的支持 <code>.xcassets</code> 了。</strong></p>
<h2 id="3-2-同名资源的冲突问题"><a href="#3-2-同名资源的冲突问题" class="headerlink" title="3.2 同名资源的冲突问题"></a>3.2 同名资源的冲突问题</h2><p>从上面的分析可以看出：</p>
<p>使用 <code>resources</code> 之后只会简单的将资源文件 copy 到目标工程（Example 工程），最后和目标工程的图片文件以及其他同样使用 <code>resources</code> 的 Pod 的图片文件，统一一起打包为了一个 <code>Assets.car</code>。</p>
<p>使用 <code>resource_bundles</code> 之后会为为指定的资源打一个 <code>.bundle</code>，<code>.bundle</code>包含一个 <code>Assets.car</code>，获取图片的时候要严格指定 <code>.bundle</code> 的位置，很好的隔离了各个库或者一个库下的资源包。</p>
<p>显然，使用 <code>resources</code>，如果出现同名的图片，显然是会出现冲突的，同样使用 <code>some-image</code> 名称的两个图片资源，不一定能正确调用到。</p>
<h4 id="3-2-1-简单验证-resources-重名问题"><a href="#3-2-1-简单验证-resources-重名问题" class="headerlink" title="3.2.1 简单验证 resources 重名问题"></a>3.2.1 简单验证 resources 重名问题</h4><p>给 Example 文件添加一个同样叫 <code>some-image</code> 的图片：</p>
<p><img src="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-16.png" alt=""></p>
<p>OK，现在的情况是 Example 工程自己有一个 <code>some-image</code> 图片资源，SubModule 这个 Pod 库也有一个 <code>some-image</code> 图片资源。</p>
<p>还是之前的显示图片的代码，再运行一下：</p>
<p><img src="https://raw.githubusercontent.com/summertian4/Images/master/blog/blog_pod-resource-reference-17.png" alt=""></p>
<p>可以看到，图片显然是用错了，显示了 Example 工程自己的 <code>some-image</code></p>
<p>这就是 resources 的重名资源问题。</p>
<p>而使用 <code>resource_bundles</code> 则可以很好的避开这个问题。</p>
<h1 id="4-总结"><a href="#4-总结" class="headerlink" title="4. 总结"></a>4. 总结</h1><p><strong>resource_bundles 优点：</strong></p>
<ol>
<li>可以使用 <code>.xcassets</code> 指定资源文件</li>
<li>可以避免每个库和主工程之间的同名资源冲突</li>
</ol>
<p><strong>resource_bundles 缺点：</strong></p>
<ol>
<li>获取图片时可能需要使用硬编码的形式来获取：<code>[[NSBundle bundleForClass:[self class]].resourcePath stringByAppendingPathComponent:@&quot;/SubModule_Use_Bundle.bundle&quot;]</code></li>
</ol>
<p><strong>resources 优点：</strong></p>
<ol>
<li>可以使用 <code>.xcassets</code> 指定资源文件</li>
</ol>
<p><strong>resources 缺点：</strong></p>
<ol>
<li>会导致每个库和主工程之间的同名资源冲突</li>
<li>不需要用硬编码方式获取图片：<code>[NSBundle bundleForClass:[self class]] compatibleWithTraitCollection:nil];</code></li>
</ol>
<p>So，一般来说使用 <code>resource_bundles</code> 会更好，不过关于硬编码，还可以再找找别的方式去避免。</p>
<h1 id="5-Demo"><a href="#5-Demo" class="headerlink" title="5. Demo"></a>5. Demo</h1><p>本文所有的 Demo 代码都在 <a target="_blank" rel="noopener" href="https://github.com/summertian4/iOS-ObjectiveC/tree/master/Pod-Resource-Reference">这里</a></p>
<hr>
<p>有什么问题都可以在博文后面留言，或者微博上私信我。</p>
<p>博主是 iOS 妹子一枚。</p>
<p>希望大家一起进步。</p>
<p>我的微博：<a target="_blank" rel="noopener" href="http://weibo.com/coderfish/">LottyLotty周小鱼</a></p>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2018/01/08/%E4%B8%80%E5%91%A8%E9%98%85%E8%AF%BB%E5%88%97%E8%A1%A8-2018/" rel="prev" title="一周阅读列表-2018">
      <i class="fa fa-chevron-left"></i> 一周阅读列表-2018
    </a></div>
      <div class="post-nav-item">
    <a href="/2018/05/20/python-scan-code-login/" rel="next" title="Python——奇怪的扫码登录">
      Python——奇怪的扫码登录 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%E5%BC%95%E7%94%A8%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="nav-number">1.</span> <span class="nav-text">1. 资源文件引用的方式</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-resource-bundles"><span class="nav-number">1.1.</span> <span class="nav-text">1.1 resource_bundles</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-2-resources"><span class="nav-number">1.2.</span> <span class="nav-text">1.2 resources</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-%E5%9B%BE%E7%89%87%E8%B5%84%E6%BA%90%E7%9A%84%E7%AE%A1%E7%90%86"><span class="nav-number">2.</span> <span class="nav-text">2. 图片资源的管理</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-%E5%AE%9E%E9%99%85%E9%AA%8C%E8%AF%81"><span class="nav-number">3.</span> <span class="nav-text">3. 实际验证</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-resource-bundles-%E6%98%AF%E5%90%A6%E8%83%BD%E4%BD%BF%E7%94%A8-xcassets-%E6%8C%87%E5%AE%9A%E8%B5%84%E6%BA%90%E5%B9%B6%E6%AD%A3%E7%A1%AE%E6%89%93%E5%8C%85"><span class="nav-number">3.1.</span> <span class="nav-text">3.1 resource_bundles 是否能使用 *.xcassets 指定资源并正确打包</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-1-%E4%BD%BF%E7%94%A8-resources"><span class="nav-number">3.1.1.</span> <span class="nav-text">3.1.1 使用 resources</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-2-%E4%BD%BF%E7%94%A8-resource-bundles"><span class="nav-number">3.1.2.</span> <span class="nav-text">3.1.2 使用 resource_bundles</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-3-resources-%E5%92%8C-resource-bundles-%E5%AF%B9%E4%BA%8E-xcassets-%E7%9A%84%E6%94%AF%E6%8C%81"><span class="nav-number">3.1.3.</span> <span class="nav-text">3.1.3 resources 和 resource_bundles 对于 .xcassets 的支持</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-%E5%90%8C%E5%90%8D%E8%B5%84%E6%BA%90%E7%9A%84%E5%86%B2%E7%AA%81%E9%97%AE%E9%A2%98"><span class="nav-number">3.2.</span> <span class="nav-text">3.2 同名资源的冲突问题</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-1-%E7%AE%80%E5%8D%95%E9%AA%8C%E8%AF%81-resources-%E9%87%8D%E5%90%8D%E9%97%AE%E9%A2%98"><span class="nav-number">3.2.0.1.</span> <span class="nav-text">3.2.1 简单验证 resources 重名问题</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-%E6%80%BB%E7%BB%93"><span class="nav-number">4.</span> <span class="nav-text">4. 总结</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#5-Demo"><span class="nav-number">5.</span> <span class="nav-text">5. Demo</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Author"
      src="/uploads/avatar.jpg">
  <p class="site-author-name" itemprop="name">Author</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">71</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
        <span class="site-state-item-count">23</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="http://blog.imallen.wang" title="http://blog.imallen.wang" rel="noopener" target="_blank">王龙海の博客</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://mafei.me" title="http://mafei.me" rel="noopener" target="_blank">马飞の博客</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://www.jianshu.com/users/86344ec5bfe7/latest_articles" title="http://www.jianshu.com/users/86344ec5bfe7/latest_articles" rel="noopener" target="_blank">Afluyの博客</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="http://hyyy.me" title="http://hyyy.me" rel="noopener" target="_blank">yuanの博客</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://blog.6ag.cn" title="https://blog.6ag.cn" rel="noopener" target="_blank">六阿哥の博客</a>
        </li>
        <li class="links-of-blogroll-item">
          <a href="https://www.eyrefree.org/" title="https://www.eyrefree.org/" rel="noopener" target="_blank">EyreFreeの博客</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        
  <div class="beian"><a href="https://beian.miit.gov.cn" rel="noopener" target="_blank">苏ICP备19008876号-2 </a>
  </div>

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Author</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
